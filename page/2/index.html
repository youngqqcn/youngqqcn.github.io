<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="blog" />
       
      <meta name="description" content="yqq" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> yqq&#39;s blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <!-- mermaid -->
      
      <script src="https://cdn.jsdelivr.net/npm/mermaid@11.2.1/dist/mermaid.min.js"></script>
      
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover5.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">yqq&#39;s blog</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['Hello,world!', '', ''],
        startDelay: 0,
        typeSpeed: 150,
        loop: false,
        backSpeed: 10000000,
        showCursor: false
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  <article class="articles">
    
    
    
    
    <article
  id="post-technology/other/知道创宇研发技能表"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2025/04/09/technology/other/%E7%9F%A5%E9%81%93%E5%88%9B%E5%AE%87%E7%A0%94%E5%8F%91%E6%8A%80%E8%83%BD%E8%A1%A8/"
    >知道创宇研发技能表</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2025/04/09/technology/other/%E7%9F%A5%E9%81%93%E5%88%9B%E5%AE%87%E7%A0%94%E5%8F%91%E6%8A%80%E8%83%BD%E8%A1%A8/" class="article-date">
  <time datetime="2025-04-09T09:59:00.000Z" itemprop="datePublished">2025-04-09</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%81%8C%E4%B8%9A/">职业</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/knownsec/RD_Checklist">https://github.com/knownsec/RD_Checklist</a></p>
</blockquote>
<h1 id="通用技能"><a href="#通用技能" class="headerlink" title="通用技能"></a>通用技能</h1><h2 id="公司与个人"><a href="#公司与个人" class="headerlink" title="公司与个人"></a>公司与个人</h2><ul>
<li>  公司是盈利性组织</li>
<li>  个人和公司必须双赢</li>
<li>  在认同公司理念且能够给公司创造足够价值的基础上，为个人发展而工作</li>
</ul>
<h2 id="Who-am-I"><a href="#Who-am-I" class="headerlink" title="Who am I"></a>Who am I</h2><h3 id="黑客是守正出奇且具备创造力的群体"><a href="#黑客是守正出奇且具备创造力的群体" class="headerlink" title="黑客是守正出奇且具备创造力的群体"></a>黑客是守正出奇且具备创造力的群体</h3><h4 id="守正出奇"><a href="#守正出奇" class="headerlink" title="守正出奇"></a>守正出奇</h4><ul>
<li>  这条正道/底线得坚守</li>
<li>  但如果太过正就迂腐了，为了搞定任务有时得出奇招</li>
</ul>
<h4 id="创造力"><a href="#创造力" class="headerlink" title="创造力"></a>创造力</h4><ul>
<li>  一个没有创造力的人是多么的可怜，对于团队来说也是一种耻辱</li>
<li>  本技能表的本质目的只有一个：引导你拥有足够的创造力</li>
</ul>
<h3 id="黑客也可以是一种思维方式"><a href="#黑客也可以是一种思维方式" class="headerlink" title="黑客也可以是一种思维方式"></a>黑客也可以是一种思维方式</h3><h3 id="我们需要对得起名片上的那个头衔：工程师、研究员"><a href="#我们需要对得起名片上的那个头衔：工程师、研究员" class="headerlink" title="我们需要对得起名片上的那个头衔：工程师、研究员"></a>我们需要对得起名片上的那个头衔：工程师、研究员</h3><h3 id="牛人姿态"><a href="#牛人姿态" class="headerlink" title="牛人姿态"></a>牛人姿态</h3><ul>
<li>  即使现在不是牛人，也得具备这样的姿态</li>
<li>  没有一定扎实内功与远见的人很少有这样的姿态</li>
<li>  拥有不将就的做事风格，迟早是牛人</li>
</ul>
<h2 id="如何做事"><a href="#如何做事" class="headerlink" title="如何做事"></a>如何做事</h2><h3 id="方法论"><a href="#方法论" class="headerlink" title="方法论"></a>方法论</h3><ul>
<li>  完成一件事有好几条途径，优秀的人的途径最短</li>
<li>  任务拆分很容易得出做事的方法论</li>
<li>好的「方法论」会让你具备更强的「创造力」！<ul>
<li>  时刻问自己：「是否具备创造力？」</li>
</ul>
</li>
</ul>
<h3 id="任务拆分"><a href="#任务拆分" class="headerlink" title="任务拆分"></a>任务拆分</h3><p>成长过程会经历：能力越大、责任越大、事情越多</p>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ul>
<li>  拆分细化为多个点</li>
<li>  排好优先级</li>
</ul>
<p>任务四象限，决定优先级</p>
<ul>
<li>紧急重要<ul>
<li>  赶紧搞定</li>
</ul>
</li>
<li>重要不紧急<ul>
<li>  时刻保持关注，以免沦为「紧急重要」</li>
</ul>
</li>
<li>紧急不重要<ul>
<li>  少少益善，学会拒绝</li>
</ul>
</li>
<li>不紧急不重要<ul>
<li>  靠自律</li>
</ul>
</li>
</ul>
<h3 id="SMART-原则"><a href="#SMART-原则" class="headerlink" title="SMART 原则"></a>SMART 原则</h3><ul>
<li>S：任务是否明确<ul>
<li>  不明确的任务搞起来就是浪费生命</li>
</ul>
</li>
<li>M：任务是否可度量<ul>
<li>  不可度量如何体现价值？</li>
</ul>
</li>
<li>A：任务是否可搞定<ul>
<li>  搞不定就不应该接，接就得有魄力搞定</li>
</ul>
</li>
<li>R：任务的相关性如何<ul>
<li>  决定了任务的价值，相关性越高越能体现价值，比如这个任务搞定了能让团队获得公司、客户等更大的认可</li>
</ul>
</li>
<li>T：任务的时间<ul>
<li>  Timeline：任务时间轴，什么时间点需要搞定什么</li>
<li>  Deadline：任务的最后期限，做评估时最好提前，因为总会有各种意外或拖延本性</li>
<li>Timeline<br>  上一些很关键的时间点我们可以称为里程碑，搞定每个里程碑应该庆祝下</li>
</ul>
</li>
</ul>
<h3 id="自己欠缺什么，立马发现"><a href="#自己欠缺什么，立马发现" class="headerlink" title="自己欠缺什么，立马发现"></a>自己欠缺什么，立马发现</h3><h3 id="是否需要寻求帮助，谁能帮你，自己单干？"><a href="#是否需要寻求帮助，谁能帮你，自己单干？" class="headerlink" title="是否需要寻求帮助，谁能帮你，自己单干？"></a>是否需要寻求帮助，谁能帮你，自己单干？</h3><h3 id="团队"><a href="#团队" class="headerlink" title="团队"></a>团队</h3><p>士气第一</p>
<ul>
<li>当你有团队时，分配与调度好任务很关键<ul>
<li>  做得好是真并发</li>
<li>  做不好会死锁</li>
</ul>
</li>
</ul>
<h3 id="沟通、反馈与责任"><a href="#沟通、反馈与责任" class="headerlink" title="沟通、反馈与责任"></a>沟通、反馈与责任</h3><ul>
<li>  一个无沟通能力的人，要么是天才，要么是不可爱的人，不过天才也就寥寥无几而已，你并不是</li>
<li>反馈要及时<ul>
<li>  避免出问题不反馈，影响进度</li>
<li>方式<ul>
<li>  正式的：邮件</li>
<li>  临时的：微信等即时通信</li>
<li>  着急的：给个电话</li>
</ul>
</li>
</ul>
</li>
<li>  工作有大小，责任心无大小</li>
<li>周报的透明<ul>
<li>意义：大家互相了解工作与心得，有利于自己的判断与成长<ul>
<li>  观察是一种很重要的技能</li>
<li>  不是单纯的给领导汇报工作</li>
</ul>
</li>
<li>  周报需体现本周工作总结、下周工作计划、心得/问题/建议（我们叫唧唧歪歪）</li>
<li>周报可以很好体现一个人的<ul>
<li>  总结能力</li>
<li>  计划能力</li>
<li>分享能力<ul>
<li>  想象下：一个人从来没有心得/问题/建议的沉淀或反馈，这个人是一个相对封闭的人，在团队作战中很难达到默契</li>
<li>  当然，这种分享能力远不仅仅是在周报这种形式里</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="团队意识"><a href="#团队意识" class="headerlink" title="团队意识"></a>团队意识</h3><ul>
<li>很多人都说自己具备足够好的团队意识，但是有些人却并不是这样<ul>
<li>举个小例子：一个 10 人团队约定早上 10 点开会，而你迟到了 10<br>  分钟，对于团队来说你浪费了整个团队 100 分钟（10 人 * 10<br>  分钟）的生命。有些人无羞愧之心要么是意识不到这点，要么这个团队的风气就是这样...</li>
</ul>
</li>
<li>  团队意识是建立在互相信任的基础上</li>
<li>  &quot;尺有所短，寸有所长&quot; 是一个优秀的团队必须要达成的共识</li>
<li>Leader 最关键，优秀的 Leader 一定会有个优秀团队<ul>
<li>  兵熊熊一个</li>
<li>  将熊熊一窝</li>
</ul>
</li>
<li>  如何拥有个优秀的团队是一个复杂的话题</li>
</ul>
<h2 id="成长"><a href="#成长" class="headerlink" title="成长"></a>成长</h2><h3 id="新事物的敏感性"><a href="#新事物的敏感性" class="headerlink" title="新事物的敏感性"></a>新事物的敏感性</h3><ul>
<li>  保持好奇心</li>
<li>  不要局限在自己的圈子，适当跨界吸收灵感</li>
<li>  订阅国内外优秀博客/资源</li>
<li>  选择性参与一些必要的会议，听必要的主题，讨论必要的话题</li>
</ul>
<h3 id="关于知识"><a href="#关于知识" class="headerlink" title="关于知识"></a>关于知识</h3><ul>
<li>  好记性不如烂笔头，勤做笔记所带来的收益远超你想象</li>
<li>  尽快尽早的将自己的知识形成系统化认知，会达到事半功倍的效果</li>
<li>  对知识的渴望程度决定了前进动力的大小</li>
<li>  当知识很廉价地摆在你面前，你反而不会珍惜</li>
<li>  对知识保持敬畏之心</li>
</ul>
<h3 id="关于信息获取"><a href="#关于信息获取" class="headerlink" title="关于信息获取"></a>关于信息获取</h3><ul>
<li>  拓宽自己获取信息的渠道，但不要陷入低信噪比的泥潭</li>
<li>信息筛选<ul>
<li>与你相关性如何？</li>
<li>整体可信度多高？</li>
<li>有效信息量多少？</li>
</ul>
</li>
<li>  处理并重新组织为你自己的理解</li>
</ul>
<h3 id="不要让自己成为矫情-浮夸的人"><a href="#不要让自己成为矫情-浮夸的人" class="headerlink" title="不要让自己成为矫情/浮夸的人"></a>不要让自己成为矫情/浮夸的人</h3><h3 id="和比你厉害的人在一起，和一流的人工作"><a href="#和比你厉害的人在一起，和一流的人工作" class="headerlink" title="和比你厉害的人在一起，和一流的人工作"></a>和比你厉害的人在一起，和一流的人工作</h3><ul>
<li>  指点往往是精华</li>
<li>杜绝笨蛋爆炸<ul>
<li>  二流的人招进来的人不太可能是一流的</li>
<li>  久而久之一个团队就笨蛋爆炸了</li>
</ul>
</li>
</ul>
<h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><ul>
<li>  批判性思考</li>
<li>  解构与系统化思考</li>
<li>换位思考<ul>
<li>  对于一个团队来说，这点太关键</li>
</ul>
</li>
</ul>
<h3 id="提问的智慧"><a href="#提问的智慧" class="headerlink" title="提问的智慧"></a>提问的智慧</h3><ul>
<li>遇到问题先独立思考，尝试独立解决，尽最大努力后再提问  <!-- - Google/ChatGPT -->
  <!-- -  [《你尽力了吗？》](https://paper.seebug.org/papers/scz/body/200004171952.txt) --></li>
<li> <strong>很多技术，明天就会过时，如果你掌握的是学习方法，那你还有下一个机会，如果你掌握的仅仅是这个技术本身，你就没有机会了。</strong></li>
<li>  提问时，礼貌很关键（对知识的敬畏），清晰表达很关键</li>
<li>  解决后，分享出来帮助更多需要帮助的人</li>
</ul>
<h3 id="小事心态"><a href="#小事心态" class="headerlink" title="小事心态"></a>小事心态</h3><ul>
<li>  越基础的事越关键，越需要细心</li>
<li>  不要一味盲目追求「高级感」，而忽视「小事」/「简单事」/「基础事」</li>
<li>  基础不牢、地动山摇</li>
<li>  小事做不好，别提大事</li>
</ul>
<h3 id="无论是个人还是团队的成长都需要不断沉淀知识，没有沉淀根基不稳"><a href="#无论是个人还是团队的成长都需要不断沉淀知识，没有沉淀根基不稳" class="headerlink" title="无论是个人还是团队的成长都需要不断沉淀知识，没有沉淀根基不稳"></a>无论是个人还是团队的成长都需要不断沉淀知识，没有沉淀根基不稳</h3><h2 id="完成的定义"><a href="#完成的定义" class="headerlink" title="完成的定义"></a>完成的定义</h2><h3 id="比如写个-POC"><a href="#比如写个-POC" class="headerlink" title="比如写个 POC"></a>比如写个 POC</h3><ol>
<li> 搞懂了目标 Web 应用漏洞的原理</li>
<li> 熟练运用 Python 各相关模块与机制</li>
<li>熟练了解了 HTTP 协议<ul>
<li>  HTTP 请求</li>
<li>  HTTP 响应</li>
</ul>
</li>
<li> 代码写得够规范，让人看起来就是爽</li>
<li>程序经过足够的测试<ul>
<li>  黑盒测试</li>
<li>  白盒测试</li>
</ul>
</li>
<li>及时反馈进度<ul>
<li>  我遇到困难了</li>
<li>  我搞定了</li>
</ul>
</li>
<li> 更新相关文档，沉淀</li>
</ol>
<h2 id="熟练的定义"><a href="#熟练的定义" class="headerlink" title="熟练的定义"></a>熟练的定义</h2><h3 id="比如熟练-SQL-注入"><a href="#比如熟练-SQL-注入" class="headerlink" title="比如熟练 SQL 注入"></a>比如熟练 SQL 注入</h3><ul>
<li>  SQL 语句这门”语言”能脱离文档顺手写出</li>
<li>主流数据库的 SQL 特有函数、存储过程、机制我都了如指掌<ul>
<li>  MySQL</li>
<li>  PostgreSQL</li>
<li>  ...</li>
</ul>
</li>
<li>牛逼的工具我不仅用的顺其自然，源码还读过几遍，我能修改<ul>
<li>  pocsuite3</li>
<li>  sqlmap</li>
<li>  metasploit</li>
<li>  nmap</li>
<li>  ...</li>
</ul>
</li>
<li>我具备创造性，而不仅仅是跟在大牛身后<ul>
<li>  研究出了几个不错的技巧</li>
<li>  发了几篇不错的 Paper</li>
<li>  对外会议/沙龙等进行了几次分享</li>
<li>  写出了自己的相关工具，爽</li>
</ul>
</li>
<li>  我实战了 N 回，遇到了很多奇葩环境，我有足够的信心绕过</li>
<li>  以上这些之后，这才叫熟练！其他同理</li>
</ul>
<h2 id="好书推荐"><a href="#好书推荐" class="headerlink" title="好书推荐"></a>好书推荐</h2><h3 id="推荐理由"><a href="#推荐理由" class="headerlink" title="推荐理由"></a>推荐理由</h3><ul>
<li>打通任督二脉的书，怎能不看？<ul>
<li>  但，尽信书不如无书</li>
</ul>
</li>
<li>  任何科学研究最终必须至少到哲学层面，触碰到上帝的脚</li>
<li>  具体技术类书籍请见「专业技能」相关部分</li>
</ul>
<h3 id="鸡汤类"><a href="#鸡汤类" class="headerlink" title="鸡汤类"></a>鸡汤类</h3><h4 id="UNIX-编程艺术"><a href="#UNIX-编程艺术" class="headerlink" title="UNIX 编程艺术"></a>UNIX 编程艺术</h4><p>极客的思维哲学</p>
<ul>
<li>  使用简洁的接口拼合简单的部件</li>
<li>  清晰胜于机巧</li>
<li>  设计时考虑拼接组合</li>
<li>  策略同机制分离，接口同引擎分离</li>
<li>  设计要简洁，复杂度能低则低</li>
<li>  除非确无它法，不要编写庞大的程序</li>
<li>  设计要可见，以便审查和调试</li>
<li>  健壮源于透明与简洁</li>
<li>  把知识叠入数据以求逻辑质朴而健壮</li>
<li>  接口设计避免标新立异</li>
<li>  如果一个程序没什么好说的，就保持沉默</li>
<li>  出现异常时，马上退出并给出足量错误信息</li>
<li>  宁花机器一分，不花程序员一秒</li>
<li>  避免手工hack，尽量编写程序去生成程序</li>
<li>  雕琢前先得有原型，跑之前先学会走</li>
<li>  决不相信所谓”不二法门”的断言</li>
<li>  设计着眼未来，未来总比预想快</li>
</ul>
<h4 id="黑客与画家"><a href="#黑客与画家" class="headerlink" title="黑客与画家"></a>黑客与画家</h4><p>印象深刻：设计者的品味</p>
<ul>
<li>好设计是简单的设计<ul>
<li>  抓住本质</li>
</ul>
</li>
<li>好设计是永不过时的设计<ul>
<li>  如果解决方法是丑陋的，那就肯定还有更好的解决方法，只是还没有发现而已</li>
</ul>
</li>
<li>  好设计是解决主要问题的设计</li>
<li>  好设计是启发性的设计</li>
<li>  好设计通常是有点趣味性的设计</li>
<li>  好设计是艰苦的设计</li>
<li>  好设计是看似容易的设计</li>
<li>  好设计是对称的设计</li>
<li>  好设计是模仿大自然的设计</li>
<li>  好设计是一种再设计</li>
<li>  好设计是能够复制的设计</li>
<li>  好设计往往是奇特的设计</li>
<li>  好设计是成批出现的</li>
<li>  好设计常常是大胆的设计</li>
</ul>
<h4 id="浪潮之巅"><a href="#浪潮之巅" class="headerlink" title="浪潮之巅"></a>浪潮之巅</h4><p>感受 IT 帝国的崛起与没落，我们现在站在又一个互联网浪潮之巅</p>
<h4 id="代码2-0-网络空间中的法律"><a href="#代码2-0-网络空间中的法律" class="headerlink" title="代码2.0 - 网络空间中的法律"></a>代码2.0 - 网络空间中的法律</h4><p>网络不是法外之地</p>
<h3 id="洁癖类"><a href="#洁癖类" class="headerlink" title="洁癖类"></a>洁癖类</h3><ul>
<li>  重构</li>
<li>  代码整洁之道</li>
<li>  代码大全 2</li>
</ul>
<h3 id="敏捷类"><a href="#敏捷类" class="headerlink" title="敏捷类"></a>敏捷类</h3><ul>
<li>Rework中文版<ul>
<li>  37signals 团队的敏捷经验</li>
</ul>
</li>
<li>  高效程序员的 45 个习惯</li>
</ul>
<h3 id="产品类"><a href="#产品类" class="headerlink" title="产品类"></a>产品类</h3><ul>
<li>  人人都是产品经理</li>
<li>  结网</li>
</ul>
<h3 id="神书"><a href="#神书" class="headerlink" title="神书"></a>神书</h3><ul>
<li>  自私的基因</li>
<li>  失控</li>
</ul>
<h3 id=""><a href="#" class="headerlink" title="..."></a>...</h3> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF/" rel="tag">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8A%80%E8%83%BD/" rel="tag">技能</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%81%8C%E4%B8%9A/" rel="tag">职业</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-technology/other/视频编码格式与浏览器兼容性问题"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2025/04/07/technology/other/%E8%A7%86%E9%A2%91%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%E4%B8%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%80%A7%E9%97%AE%E9%A2%98/"
    >HEVC视频编码格式与浏览器兼容性问题</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2025/04/07/technology/other/%E8%A7%86%E9%A2%91%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%E4%B8%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%80%A7%E9%97%AE%E9%A2%98/" class="article-date">
  <time datetime="2025-04-07T09:04:00.000Z" itemprop="datePublished">2025-04-07</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>问题</p>
<p>以下是ChatGPT的回复</p>
<p>HEVC (Main) 和 H.264 (High) 是两种不同的视频编码标准，它们有几个主要区别：</p>
<ol>
<li>编码效率和压缩比</li>
</ol>
<ul>
<li>HEVC (H.265)：比 H.264 更高效，能够在相同的视频质量下提供更低的比特率。换句话说，HEVC 可以在更小的文件大小下保持更好的画质。</li>
<li>H.264：相较于 HEVC，压缩效率较低，相同质量的视频会有较大的文件大小。</li>
</ul>
<ol start="2">
<li>视频质量</li>
</ol>
<ul>
<li>HEVC：能够提供更高的压缩率和视频质量，特别是在高分辨率视频（如 4K）和低比特率的情况下表现更好。</li>
<li>H.264：虽然它也提供高质量的视频，但相对于 HEVC 来说，压缩率较低，可能在较低比特率下会出现更多的压缩损失或画质下降。</li>
</ul>
<ol start="3">
<li>硬件支持</li>
</ol>
<ul>
<li>HEVC：因为 HEVC 比 H.264 更复杂，许多旧的硬件设备（如老款的电视、手机、平板等）可能不支持 HEVC 解码或编码，尤其是低端设备。</li>
<li>H.264：几乎所有设备和平台都支持 H.264，无论是硬件解码还是软件解码。</li>
</ul>
<ol start="4">
<li>编码复杂度</li>
</ol>
<ul>
<li>HEVC：编码复杂度高，需要更多的计算资源来进行编码和解码，因此会消耗更多的 CPU 或 GPU 资源。</li>
<li>H.264：编码和解码相对简单，因此对于低功耗设备或实时视频流应用更为合适。</li>
</ul>
<ol start="5">
<li>广泛应用</li>
</ol>
<ul>
<li>HEVC：主要用于高分辨率视频（如 4K 视频），而且在流媒体和广播等新兴领域越来越流行。</li>
<li>H.264：依然是网络视频流、视频会议、蓝光光盘等领域的主流编码格式。</li>
</ul>
<ol start="6">
<li>兼容性</li>
</ol>
<ul>
<li>HEVC：新兴的编码格式，虽然它在压缩和质量上有优势，但老旧设备和浏览器的兼容性相对较差。<ul>
<li>Linux(Ubuntu)的Chrome浏览器不支持</li>
<li>Windows/MacOS/Andriod都支持</li>
</ul>
</li>
<li>H.264：几乎所有设备和平台都支持，兼容性最好。</li>
</ul>
<p>浏览器适配方案</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>视频播放示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>视频播放示例<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">&quot;video-player&quot;</span> <span class="attr">controls</span> <span class="attr">width</span>=<span class="string">&quot;640&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 默认的视频文件，支持 H.264 格式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">id</span>=<span class="string">&quot;video-source&quot;</span> <span class="attr">src</span>=<span class="string">&quot;video_h264.mp4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 如果浏览器支持 HEVC 格式，可以加载 HEVC 视频 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;video_hevc.mp4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4; codecs=hevc&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 备用格式 WebM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;video.webm&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/webm&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 如果浏览器不支持视频格式 --&gt;</span></span><br><span class="line">    您的浏览器不支持视频播放，请更新浏览器或使用支持的视频格式。</span><br><span class="line">  <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> videoElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;video-player&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> h264Support = videoElement.<span class="title function_">canPlayType</span>(<span class="string">&#x27;video/mp4; codecs=&quot;avc1.42E01E&quot;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> hevcSupport = videoElement.<span class="title function_">canPlayType</span>(<span class="string">&#x27;video/mp4; codecs=&quot;hevc&quot;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (hevcSupport) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 如果支持 HEVC，则加载 HEVC 格式的视频</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;video-source&#x27;</span>).<span class="property">src</span> = <span class="string">&#x27;video_hevc.mp4&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (h264Support) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 如果支持 H.264，则加载 H.264 格式的视频</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;video-source&#x27;</span>).<span class="property">src</span> = <span class="string">&#x27;video_h264.mp4&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 如果两者都不支持，加载 WebM 格式</span></span></span><br><span class="line"><span class="language-javascript">      videoElement.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;source src=&quot;video.webm&quot; type=&quot;video/webm&quot;&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ffmpeg/" rel="tag">ffmpeg</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag">学习</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF/" rel="tag">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%A7%86%E9%A2%91/" rel="tag">视频</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-technology/python/python3.13无GIL自由线程新特性"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2025/03/27/technology/python/python3.13%E6%97%A0GIL%E8%87%AA%E7%94%B1%E7%BA%BF%E7%A8%8B%E6%96%B0%E7%89%B9%E6%80%A7/"
    >python3.13无GIL自由线程新特性</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2025/03/27/technology/python/python3.13%E6%97%A0GIL%E8%87%AA%E7%94%B1%E7%BA%BF%E7%A8%8B%E6%96%B0%E7%89%B9%E6%80%A7/" class="article-date">
  <time datetime="2025-03-27T08:11:35.000Z" itemprop="datePublished">2025-03-27</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="安装Python3-13-2"><a href="#安装Python3-13-2" class="headerlink" title="安装Python3.13.2"></a>安装Python3.13.2</h2><p>Windows: 安装python3.13, 直接下载即可，在安装目录的 <code>python3.13t</code></p>
<ul>
<li>在”Advanced Options”下，确保选择“Download free-threaded binaries(experimental)”选项，然后点击“安装”</li>
</ul>
<p>Ubuntu: 下载代码编译</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">./configure --disable-gil --enable-optimizations</span><br><span class="line">make</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">会覆盖系统的python</span></span><br><span class="line">make install</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者， 不覆盖系统的python</span></span><br><span class="line">make altinstall</span><br></pre></td></tr></table></figure>

<h2 id="运行测试代码"><a href="#运行测试代码" class="headerlink" title="运行测试代码:"></a>运行测试代码:</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">16</span>):</span><br><span class="line">    threading.Thread(target=f).start()</span><br></pre></td></tr></table></figure>

<p>使用<code>python3.13t</code> 或 <code>python3.13</code> 运行代码 <code>python3.13t test.py</code> 或 <code>PYTHON_GIL=0 python3.13 test.py</code> 或 <code>python3.13 -Xgil=0 test.py</code>, 查看16核CPU的占用率100%</p>
<ul>
<li><p>如何没有设置 <code>PYTHON_GIL</code>， 那么 python3.13默认是无GIL的</p>
</li>
<li><p>对比python3.13的无GIL版本:<br>  <img src="https://raw.githubusercontent.com/youngqqcn/repo4picgo/master/img/python-nogil-test.png"></p>
</li>
<li><p>对比python3.13 的有GIL版本:</p>
<p>  <img src="https://raw.githubusercontent.com/youngqqcn/repo4picgo/master/img/python3.13-gil-test.png"></p>
</li>
<li><p>对比python3.12版本(有GIL)<br>  <img src="https://raw.githubusercontent.com/youngqqcn/repo4picgo/master/img/python-withgil-test.png"></p>
</li>
</ul>
<h2 id="PEP-703"><a href="#PEP-703" class="headerlink" title="PEP-703"></a>PEP-703</h2><p><a target="_blank" rel="noopener" href="https://peps.python.org/pep-0703/">https://peps.python.org/pep-0703/</a></p>
<h2 id="关于容器的线程安全"><a href="#关于容器的线程安全" class="headerlink" title="关于容器的线程安全"></a>关于容器的线程安全</h2><p><a target="_blank" rel="noopener" href="https://peps.python.org/pep-0703/#container-thread-safety">https://peps.python.org/pep-0703/#container-thread-safety</a></p>
<p>python底层的实现中，每个object内部使用临界区来实现线程同步</p>
<blockquote>
<p>Per-object locks with critical sections provide weaker protections than the GIL. Because the GIL doesn’t necessarily ensure that concurrent operations are atomic or correct, the per-object locking scheme also cannot ensure that concurrent operations are atomic or correct. Instead, per-object locking aims for similar protections as the GIL, but with mutual exclusion limited to individual objects.</p>
</blockquote>
<ul>
<li>在object加锁<ul>
<li><code>list.append, list.insert, list.repeat, PyList_SetItem</code></li>
<li><code>dict.__setitem__, PyDict_SetItem</code></li>
<li><code>list.clear, dict.clear</code></li>
<li><code>list.__repr__, dict.__repr__, etc.</code></li>
<li><code>list.extend(iterable)</code></li>
<li><code>setiter_iternext</code></li>
</ul>
</li>
<li>在2个object加锁<ul>
<li><code>list.extend(list), list.extend(set), list.extend (dictitems), and other specializations where the implementation is specialized for argument type.</code></li>
<li><code>list.concat(list)</code></li>
<li><code>list.__eq__(list), dict.__eq__(dict)</code></li>
</ul>
</li>
<li>无锁<ul>
<li>len(list) i.e., list_length(PyListObject *a)</li>
<li>len(dict)</li>
<li>len(set)</li>
</ul>
</li>
<li>看情况, 需要根据内存分配器的实现而定， 尽量会少用锁提升性能<ul>
<li>list[idx] (list_subscript)</li>
<li>dict[key] (dict_subscript)</li>
<li>listiter_next, dictiter_iternextkey/value/item</li>
<li>list.contains</li>
</ul>
</li>
</ul>
<h2 id="no-GIL-async-await"><a href="#no-GIL-async-await" class="headerlink" title="no-GIL + async/await"></a>no-GIL + async/await</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">async_range</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">yield</span> i</span><br><span class="line"></span><br><span class="line"><span class="comment"># 异步任务</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">async_task</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;异步任务 <span class="subst">&#123;name&#125;</span> 开始执行&quot;</span>)</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">for</span> i <span class="keyword">in</span> async_range(<span class="number">1000_0000</span>):</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;异步任务 <span class="subst">&#123;name&#125;</span> 执行结束&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;结果 <span class="subst">&#123;name&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在线程中运行异步任务</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_async_in_thread</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="comment"># 创建一个新的事件循环</span></span><br><span class="line">    loop = asyncio.new_event_loop()</span><br><span class="line">    asyncio.set_event_loop(loop)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 运行异步任务</span></span><br><span class="line">    result = loop.run_until_complete(async_task(name))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 关闭事件循环</span></span><br><span class="line">    loop.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment"># 线程函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">thread_function</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;线程 <span class="subst">&#123;name&#125;</span> 开始执行&quot;</span>)</span><br><span class="line">    result = run_async_in_thread(<span class="string">f&quot;Async-<span class="subst">&#123;name&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;线程 <span class="subst">&#123;name&#125;</span> 执行结束，结果: <span class="subst">&#123;result&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"></span><br><span class="line">    start  = time.time()</span><br><span class="line">    <span class="comment"># 创建并启动线程</span></span><br><span class="line">    threads = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">16</span>):</span><br><span class="line">        thread = threading.Thread(target=thread_function, args=(<span class="string">f&quot;Thread-<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>&quot;</span>,))</span><br><span class="line">        threads.append(thread)</span><br><span class="line">        thread.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 等待所有线程完成</span></span><br><span class="line">    <span class="keyword">for</span> thread <span class="keyword">in</span> threads:</span><br><span class="line">        thread.join()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;所有任务执行完毕, 耗时: <span class="subst">&#123;time.time() - start&#125;</span> s&quot;</span> )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>


<ul>
<li>多进程<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">async_range</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">yield</span> i</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 异步任务</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">async_task</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;异步任务 <span class="subst">&#123;name&#125;</span> 开始执行&quot;</span>)</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">for</span> i <span class="keyword">in</span> async_range(<span class="number">1000_0000</span>):</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;异步任务 <span class="subst">&#123;name&#125;</span> 执行结束&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;结果 <span class="subst">&#123;name&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在进程中运行异步任务</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_async_in_thread</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="comment"># 创建一个新的事件循环</span></span><br><span class="line">    loop = asyncio.new_event_loop()</span><br><span class="line">    asyncio.set_event_loop(loop)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 运行异步任务</span></span><br><span class="line">    result = loop.run_until_complete(async_task(name))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 关闭事件循环</span></span><br><span class="line">    loop.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 线程函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">thread_function</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;进程 <span class="subst">&#123;name&#125;</span> 开始执行&quot;</span>)</span><br><span class="line">    result = run_async_in_thread(<span class="string">f&quot;Async-<span class="subst">&#123;name&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;进程 <span class="subst">&#123;name&#125;</span> 执行结束，结果: <span class="subst">&#123;result&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 主函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"></span><br><span class="line">    start = time.time()</span><br><span class="line">    <span class="comment"># 创建并启动进程</span></span><br><span class="line">    processes: <span class="type">List</span>[multiprocessing.Process] = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">16</span>):</span><br><span class="line">        process = multiprocessing.Process(</span><br><span class="line">            target=thread_function, args=(<span class="string">f&quot;Process-<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>&quot;</span>,)</span><br><span class="line">        )</span><br><span class="line">        processes.append(process)</span><br><span class="line">        process.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 等待所有进程完成</span></span><br><span class="line">    <span class="keyword">for</span> process <span class="keyword">in</span> processes:</span><br><span class="line">        process.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;所有任务执行完毕, 耗时: <span class="subst">&#123;time.time() - start&#125;</span> s&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>运行时间对比</p>
<ul>
<li>使用 No-GIL python3.13 耗时<code>66s</code></li>
<li>使用 GIL python3.13 耗时<code>375s</code></li>
<li>使用带GIL的多进程<code>65s</code></li>
</ul>
<h2 id="有了multiprocessing，为什么还要No-GIL-？"><a href="#有了multiprocessing，为什么还要No-GIL-？" class="headerlink" title="有了multiprocessing，为什么还要No-GIL ？"></a>有了multiprocessing，为什么还要No-GIL ？</h2><p>因为<code>multiprocessing</code>是多进程， 每个进程都有自己的内存空间， 进程间通信成本较高</p>
<ul>
<li>进程间通信手段: Queue, Pipe, Semaphore, Socket, File</li>
<li>线程间同步: Lock, RLock, Condition, Event, Queue, Barrier</li>
</ul>
<p>NO-GIL的最大优势:</p>
<ul>
<li><strong>同一程序空间，线程间通信简单</strong></li>
</ul>
<hr>
<h2 id="附-多进程和多线程的区别"><a href="#附-多进程和多线程的区别" class="headerlink" title="[附] 多进程和多线程的区别:"></a>[附] 多进程和多线程的区别:</h2><ul>
<li><p>多进程: 每个进程有自己的内存空间</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义一个全局变量</span></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">increment</span>():</span><br><span class="line">    <span class="keyword">global</span> counter</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 创建两个进程</span></span><br><span class="line">    p1 = Process(target=increment)</span><br><span class="line">    p2 = Process(target=increment)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 启动进程</span></span><br><span class="line">    p1.start()</span><br><span class="line">    p2.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 等待进程完成</span></span><br><span class="line">    p1.join()</span><br><span class="line">    p2.join()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印最终的全局变量值</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Final counter value: <span class="subst">&#123;counter&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>  运行结果:</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ python3.13 test_process.py</span><br><span class="line">counter: 1000000</span><br><span class="line">counter: 1000000</span><br><span class="line">Final counter value: 0</span><br></pre></td></tr></table></figure>

<p>  因为主进程中的 counter没有改过, 所以最终的结果是0</p>
</li>
<li><p>多线程: 共享内存空间</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from multiprocessing import Process</span></span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义一个全局变量</span></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">increment</span>():</span><br><span class="line">    <span class="keyword">global</span> counter</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 创建两个进程</span></span><br><span class="line">    p1 = Thread(target=increment)</span><br><span class="line">    p2 = Thread(target=increment)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 启动进程</span></span><br><span class="line">    p1.start()</span><br><span class="line">    p2.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 等待进程完成</span></span><br><span class="line">    p1.join()</span><br><span class="line">    p2.join()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印最终的全局变量值</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Final counter value: <span class="subst">&#123;counter&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>使用 GIL版本运行结果:</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python3.13 -Xgil=1 test_thread.py</span><br><span class="line">Final counter value: 2000000</span><br></pre></td></tr></table></figure></li>
<li><p>使用 No-GIL版本运行结果:</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ python3.13 -Xgil=0 test_thread.py</span><br><span class="line">Final counter value: 1139283</span><br><span class="line">$ python3.13 -Xgil=0 test_thread.py</span><br><span class="line">Final counter value: 1170427</span><br><span class="line">$ python3.13 -Xgil=0 test_thread.py</span><br><span class="line">Final counter value: 1415999</span><br><span class="line">$ python3.13 -Xgil=0 test_thread.py</span><br><span class="line">Final counter value: 1205918</span><br></pre></td></tr></table></figure>
<ul>
<li>因为没有GIL的限制, 且没有加锁， 所以多线程的结果是不确定的</li>
</ul>
</li>
<li><p>对counter加锁</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread, Lock</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义一个全局变量</span></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">lock = Lock()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">increment</span>():</span><br><span class="line">    <span class="keyword">global</span> counter</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">        lock.acquire() <span class="comment"># 获取锁</span></span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">        lock.release() <span class="comment"># 释放锁</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 创建两个进程</span></span><br><span class="line">    p1 = Thread(target=increment)</span><br><span class="line">    p2 = Thread(target=increment)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 启动进程</span></span><br><span class="line">    p1.start()</span><br><span class="line">    p2.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 等待进程完成</span></span><br><span class="line">    p1.join()</span><br><span class="line">    p2.join()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印最终的全局变量值</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Final counter value: <span class="subst">&#123;counter&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>使用无GIL python运行结果:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python3.13 -Xgil=0 test_thread.py</span><br><span class="line">  Final counter value: 2000000</span><br></pre></td></tr></table></figure></li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python3-13/" rel="tag">python3.13</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-technology/blockchain/defi/Raydium做市资金量计算"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/12/10/technology/blockchain/defi/Raydium%E5%81%9A%E5%B8%82%E8%B5%84%E9%87%91%E9%87%8F%E8%AE%A1%E7%AE%97/"
    >Raydium做市资金量计算</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/12/10/technology/blockchain/defi/Raydium%E5%81%9A%E5%B8%82%E8%B5%84%E9%87%91%E9%87%8F%E8%AE%A1%E7%AE%97/" class="article-date">
  <time datetime="2024-12-10T08:24:00.000Z" itemprop="datePublished">2024-12-10</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calc_market</span>(<span class="params">market_cap_in_usd: <span class="built_in">float</span>, sol_price_in_usd: <span class="built_in">float</span></span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># k = x * y      量纲 t*s  , s 为 sol ,  t 为 token</span></span><br><span class="line">    k = <span class="number">79</span> * (<span class="number">10_0000_0000</span> - <span class="number">7_9310_0000</span>)</span><br><span class="line"></span><br><span class="line">    P = <span class="number">0</span>  <span class="comment"># 量纲   s/t</span></span><br><span class="line">    <span class="keyword">if</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="comment"># 量纲 u/s  , u为usd</span></span><br><span class="line">        target_sol_price = sol_price_in_usd</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 量纲 u/t  , u为usd</span></span><br><span class="line">        target_token_price = market_cap_in_usd / <span class="number">10_0000_0000</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># p = (u/t) / (u/s) , 目标量纲为 s/t</span></span><br><span class="line">        P = target_token_price / target_sol_price</span><br><span class="line">        <span class="comment"># print(p)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># y^2 = k / p       ,  量纲为 ts / (s/t) = t^2 , 因此 y的量纲为 t</span></span><br><span class="line">    Y = sqrt(k / P)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># x = p * y         , 量纲为 (s/t) * t = s , 因此 x 的量纲为 s</span></span><br><span class="line">    X = P * Y</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> X, Y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">target_market_cap_in_usd_lists = [<span class="number">1_0000_0000</span> * i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line">sol_price_in_usd = <span class="number">230</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> target_market_cap <span class="keyword">in</span> target_market_cap_in_usd_lists:</span><br><span class="line">    ret = calc_market(target_market_cap, sol_price_in_usd)</span><br><span class="line">    <span class="built_in">print</span>(</span><br><span class="line">        <span class="string">f&quot;拉盘到<span class="subst">&#123;target_market_cap:<span class="number">0.0</span>f&#125;</span>美金市值,  所需资金数量: <span class="subst">&#123;ret[<span class="number">0</span>]:<span class="number">0.0</span>f&#125;</span> 枚SOL , 约合 <span class="subst">&#123;ret[<span class="number">0</span>] * sol_price_in_usd : <span class="number">0.0</span>f&#125;</span> USDT&quot;</span></span><br><span class="line">    )</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>计算结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">拉盘到100000000美金市值,  所需资金数量: 2666 枚SOL , 约合  613137 USDT</span><br><span class="line">拉盘到200000000美金市值,  所需资金数量: 3770 枚SOL , 约合  867107 USDT</span><br><span class="line">拉盘到300000000美金市值,  所需资金数量: 4617 枚SOL , 约合  1061985 USDT</span><br><span class="line">拉盘到400000000美金市值,  所需资金数量: 5332 枚SOL , 约合  1226275 USDT</span><br><span class="line">拉盘到500000000美金市值,  所需资金数量: 5961 枚SOL , 约合  1371017 USDT</span><br><span class="line">拉盘到600000000美金市值,  所需资金数量: 6530 枚SOL , 约合  1501873 USDT</span><br><span class="line">拉盘到700000000美金市值,  所需资金数量: 7053 枚SOL , 约合  1622209 USDT</span><br><span class="line">拉盘到800000000美金市值,  所需资金数量: 7540 枚SOL , 约合  1734214 USDT</span><br><span class="line">拉盘到900000000美金市值,  所需资金数量: 7997 枚SOL , 约合  1839412 USDT</span><br><span class="line">拉盘到1000000000美金市值,  所需资金数量: 8430 枚SOL , 约合  1938910 USDT</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DeFi/" rel="tag">DeFi</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-technology/blockchain/ton/TON技术研究"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/12/04/technology/blockchain/ton/TON%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6/"
    >TON技术研究</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/12/04/technology/blockchain/ton/TON%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6/" class="article-date">
  <time datetime="2024-12-04T06:50:00.000Z" itemprop="datePublished">2024-12-04</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><a target="_blank" rel="noopener" href="https://github.com/ton-blockchain/ton/tree/master">https://github.com/ton-blockchain/ton/tree/master</a></p>
<p>DEX: <a target="_blank" rel="noopener" href="https://defillama.com/dexs/chains/ton">https://defillama.com/dexs/chains/ton</a></p>
<p>STON-FI: <a target="_blank" rel="noopener" href="https://github.com/ston-fi">https://github.com/ston-fi</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TON/" rel="tag">TON</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Telegram/" rel="tag">Telegram</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%AC%E9%93%BE/" rel="tag">公链</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/">上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/3/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2021-2025
        <i class="ri-heart-fill heart_icon"></i> youngqqcn
      </li>
    </ul>
    <ul>
        <!-- 感谢shenyu的ayer主题, by youngqqcn 2021-04-26-->
      <!-- <li>
        
        
        
        由 <a href="https://hexo.io" target="_blank">Hexo</a> 强力驱动
        <span class="division">|</span>
        主题 - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li> -->
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.jpeg" alt="yqq&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E7%94%9F%E6%B4%BB">生活</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E6%8A%80%E6%9C%AF">技术</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E8%AF%BB%E4%B9%A6">读书</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E5%AD%A6%E4%B9%A0">学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E6%97%85%E8%A1%8C">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E7%BE%8E%E9%A3%9F">美食</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E6%91%84%E5%BD%B1">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->
 
<script src="/js/clickBoom2.js"></script>
 
<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "neutral" });
  }
</script>


    
  </div>
</body>

</html>